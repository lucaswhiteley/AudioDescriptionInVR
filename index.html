<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TEST 5 First three.js app</title>
    <style>
        body {
            margin: 0;
        }
    </style>
</head>

<body>
    <script src="js/three.js"></script>
    <script>
        var renderer;
        var scene;
        var camera;
        var testCube;

        itit();
        populate();
        animate();

        //defines the animation of the scene and calls the renderer.
        function animate()
        {
            requestAnimationFrame ( animate );
	        //mesh.rotation.x += 0.01;
	        //mesh.rotation.y += 0.01;

            //Renders the scene
            renderer.render(scene, camera);
        }

        //Initialises the scene and other essential things before the program runs
        function itit()
        {
            //ititialises the renderer and sets it to the size of the window
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement)

            //Initialises the scene
            scene = new THREE.Scene();

            //Initialises the camera
            camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
	        camera.position.set(0, 0, 1000);
        	scene.add(camera);


            var gloorGeometry = new THREE.PlaneGeometry( window.innerWidth , window.innerHeight, 1, 1 );
	        var floorMaterial = new THREE.MeshBasicMaterial( { color: 0x00ffff } );
	        var floor = new THREE.Mesh( gloorGeometry, floorMaterial );
            //This line renders both sides of the plane
        	floor.material.side = THREE.DoubleSide;
	        //floor.rotation.x = 90;
	        scene.add(floor); 
        }

        //populates the scene with all of the objects
        function populate()
        {
            //Arrays to store the positions of the objects
            let objectsX = [];
            let objectsY = [];
            let objectsArray = [];

            //Create a loop to create a random number of cubes, spheres and cones

            var numToGen = Math.floor(Math.random()*4) + 3;
            //generates between 2 and 5 cubes
            for (let i = 0; i < numToGen; i ++)
            {


                ///Choosing the shape of the object
                let z = Math.floor(Math.random()*3) + 1;
                switch(z)
                {
                    case 1:
                        //Box
                        geometry = new THREE.BoxGeometry(200,200,200)
                        break;
                    case 2:
                        //Sphere
                        geometry = new THREE.SphereGeometry(120)
                        break;
                    case 3:
                        //Cone
                        geometry = new THREE.ConeGeometry(100,200)
                        break;
                }



                //choosing the colour of the object
                let x = Math.floor(Math.random()*3) + 1;
                switch(x)
                {
                    case 1:
                        //red
                        material = new THREE.MeshBasicMaterial({color: 0xff1100});
                        break;
                    case 2:
                        //Spring Green
                        material = new THREE.MeshBasicMaterial({color: 0x00ff59});
                        break;
                    case 3:
                        //Purple Pizzazz
                        material = new THREE.MeshBasicMaterial({color: 0xff00e1});
                        break;
                }



                mesh = new THREE.Mesh(geometry, material)
                objectsArray[i] = mesh;


                //since 0 is the middle of the plane, the position could be negative too
                mesh.position.x = Math.floor(Math.random()*800) -400;

                //loops through the x array to see if there are any overlaps
                for (let j = 0; j< objectsArray.length; j++)
                {
                    console.log("AHHH");

                    if( objectsArray[j].position.x -400 <= mesh.position.x <=  objectsArray[j].position.x -400)
                    {
                        mesh.position.x = mesh.position.x + 400;
                        console.log("X OVERLAP, ORIG:" +  objectsArray[j].x + "NEW: " + mesh.position.x) 
                        console.log("FDFDFD");
                    }
                    console.log("ADASD");
                    //console.log("3");

                }

                //adds the x position of the object to the Array
                objectsX[i] = mesh.position.x;
                mesh.position.y = Math.floor(Math.random()*800) -400;

                //loops through the Y array to see if there are any overlaps
                for (let k = 0; k< objectsY.length; k++)
                {
                    console.log(objectsY.length);

                    if( objectsY[k] -400 <= mesh.position.y <= objectsY[k] + 400)
                    {
                        mesh.position.y = mesh.position.y + 400;
                        console.log("Y OVERLAP, ORIG:" + objectsY[k] + "NEW: " + mesh.position.y)  
                    }

                    //console.log("3");

                }

                //adds the y position of the object to the Array
                objectsY[i] = mesh.position.y;

                console.log(objectsArray)



                scene.add(mesh);
            } 
            
        }
    </script>
</body>

</html>